CREATE DATABASE IF NOT EXISTS tlunews;  -- Tạo cơ sở dữ liệu nếu chưa có
USE tlunews;

-- Tạo bảng admin
CREATE TABLE admin (
    id INT AUTO_INCREMENT PRIMARY KEY,           -- ID admin, tự động tăng, khóa chính
    username VARCHAR(255) NOT NULL UNIQUE,        -- Tên đăng nhập, không được trùng và không được để trống
    password VARCHAR(255) NOT NULL,               -- Mật khẩu admin, không được để trống
    ho_ten VARCHAR(255),                          -- Họ tên của admin
    email VARCHAR(255),                           -- Địa chỉ email của admin
    ngay_tao DATETIME DEFAULT CURRENT_TIMESTAMP,  -- Ngày tạo tài khoản, mặc định là thời gian hiện tại
    fullname VARCHAR(255)                         -- Tên đầy đủ của admin
);

-- Tạo bảng danhmuc
CREATE TABLE danhmuc (
    id INT AUTO_INCREMENT PRIMARY KEY,            -- ID danh mục, tự động tăng, khóa chính
    ten_danhmuc VARCHAR(255) NOT NULL,             -- Tên danh mục, không được để trống
    mo_ta TEXT,                                   -- Mô tả về danh mục
    ngay_tao DATETIME DEFAULT CURRENT_TIMESTAMP   -- Ngày tạo danh mục, mặc định là thời gian hiện tại
);

-- Tạo bảng tintuc
CREATE TABLE tintuc (
    id INT AUTO_INCREMENT PRIMARY KEY,            -- ID tin tức, tự động tăng, khóa chính
    tieu_de VARCHAR(255) NOT NULL,                 -- Tiêu đề tin tức, không được để trống
    noi_dung TEXT NOT NULL,                        -- Nội dung tin tức, không được để trống
    anh_bia VARCHAR(255),                          -- Đường dẫn hình ảnh bìa của tin tức
    trang_thai ENUM('published', 'draft') DEFAULT 'draft', -- Trạng thái tin tức (đã xuất bản hoặc bản nháp)
    danhmuc_id INT,                                -- ID danh mục tin tức (khóa ngoại)
    ngay_tao DATETIME DEFAULT CURRENT_TIMESTAMP,   -- Ngày tạo tin tức, mặc định là thời gian hiện tại
    is_featured BOOLEAN DEFAULT FALSE,             -- Tin tức có phải là tin nổi bật không
    FOREIGN KEY (danhmuc_id) REFERENCES danhmuc(id) -- Liên kết với bảng danh mục
);

-- Tạo bảng users
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,            -- ID người dùng, tự động tăng, khóa chính
    username VARCHAR(255) NOT NULL UNIQUE,         -- Tên đăng nhập, không được trùng và không được để trống
    password VARCHAR(255) NOT NULL,                -- Mật khẩu người dùng, không được để trống
    email VARCHAR(255),                            -- Địa chỉ email của người dùng
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP  -- Ngày tạo tài khoản, mặc định là thời gian hiện tại
);
